(self.webpackChunkbabylonjs_typescript_webpack_simple_scene=self.webpackChunkbabylonjs_typescript_webpack_simple_scene||[]).push([[970],{363:(t,s,e)=>{"use strict";e.r(s),e.d(s,{VoxelCubeMazeWithBumpMap:()=>I,default:()=>S});var i=e(4147),r=e(3579),o=e(972),n=e(3789),h=e(8680),a=e.n(h),p=e(960);function m(t){return t*t*t*(t*(6*t-15)+10)}function c(t){return t>0?Math.floor(t):Math.floor(t-1)}function l(t,s,e){return s+t*(e-s)}class d{constructor(){this.perm=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180]}grad1(t,s){const e=15&t;let i=1+(7&e);return 8&e&&(i=-i),i*s}grad2(t,s,e){const i=7&t,r=i<4?s:e,o=i<4?e:s;return(1&i?-r:r)+(2&i?-2*o:2*o)}grad3(t,s,e,i){const r=15&t,o=r<8?s:e,n=r<4?e:12==r||14==r?s:i;return(1&r?-o:o)+(2&r?-n:n)}grad4(t,s,e,i,r){const o=31&t,n=o<24?s:e,h=o<16?e:i,a=o<8?i:r;return(1&o?-n:n)+(2&o?-h:h)+(4&o?-a:a)}noise1(t){let s=c(t);const e=t-s,i=e-1,r=s+1&255;return s&=255,.188*l(m(e),this.grad1(this.perm[s],e),this.grad1(this.perm[r],i))}pnoise1(t,s){let e=c(t);const i=t-e,r=i-1;s<1&&(s=1);const o=(e+1)%s&255;return e=e%s&255,.188*l(m(i),this.grad1(this.perm[e],i),this.grad1(this.perm[o],r))}noise2(t,s){let e=c(t),i=c(s);const r=t-e,o=s-i,n=r-1,h=o-1,a=e+1&255,p=i+1&255;e&=255,i&=255;const d=m(o),g=m(r);let u=this.grad2(this.perm[e+this.perm[i]],r,o),f=this.grad2(this.perm[e+this.perm[p]],r,h);const w=l(d,u,f);u=this.grad2(this.perm[a+this.perm[i]],n,o),f=this.grad2(this.perm[a+this.perm[p]],n,h);const P=l(d,u,f);return.507*l(g,w,P)}pnoise2(t,s,e,i){let r,o,n,h;r=c(t),o=c(s);const a=t-r,p=s-o,d=a-1,g=p-1;e<1&&(e=1),i<1&&(i=1);const u=(r+1)%e&255,f=(o+1)%i&255;r=r%e&255,o=o%i&255;const w=m(p),P=m(a);n=this.grad2(this.perm[r+this.perm[o]],a,p),h=this.grad2(this.perm[r+this.perm[f]],a,g);const y=l(w,n,h);n=this.grad2(this.perm[u+this.perm[o]],d,p),h=this.grad2(this.perm[u+this.perm[f]],d,g);const x=l(w,n,h);return.507*l(P,y,x)}noise3(t,s,e){let i,r,o,n,h,a,p;i=c(t),r=c(s),o=c(e);const d=t-i,g=s-r,u=e-o,f=d-1,w=g-1,P=u-1,y=i+1&255,x=r+1&255,_=o+1&255;i&=255,r&=255,o&=255;const b=m(u),v=m(g),I=m(d);n=this.grad3(this.perm[i+this.perm[r+this.perm[o]]],d,g,u),h=this.grad3(this.perm[i+this.perm[r+this.perm[_]]],d,g,P),a=l(b,n,h),n=this.grad3(this.perm[i+this.perm[x+this.perm[o]]],d,w,u),h=this.grad3(this.perm[i+this.perm[x+this.perm[_]]],d,w,P),p=l(b,n,h);const S=l(v,a,p);n=this.grad3(this.perm[y+this.perm[r+this.perm[o]]],f,g,u),h=this.grad3(this.perm[y+this.perm[r+this.perm[_]]],f,g,P),a=l(b,n,h),n=this.grad3(this.perm[y+this.perm[x+this.perm[o]]],f,w,u),h=this.grad3(this.perm[y+this.perm[x+this.perm[_]]],f,w,P),p=l(b,n,h);const z=l(v,a,p);return.936*l(I,S,z)}pnoise3(t,s,e,i,r,o){let n,h,a,p,d,g,u;n=c(t),h=c(s),a=c(e);const f=t-n,w=s-h,P=e-a,y=f-1,x=w-1,_=P-1;i<1&&(i=1),r<1&&(r=1),o<1&&(o=1);const b=(n+1)%i&255,v=(h+1)%r&255,I=(a+1)%o&255;n=n%i&255,h=h%r&255,a=a%o&255;const S=m(P),z=m(w),C=m(f);p=this.grad3(this.perm[n+this.perm[h+this.perm[a]]],f,w,P),d=this.grad3(this.perm[n+this.perm[h+this.perm[I]]],f,w,_),g=l(S,p,d),p=this.grad3(this.perm[n+this.perm[v+this.perm[a]]],f,x,P),d=this.grad3(this.perm[n+this.perm[v+this.perm[I]]],f,x,_),u=l(S,p,d);const O=l(z,g,u);p=this.grad3(this.perm[b+this.perm[h+this.perm[a]]],y,w,P),d=this.grad3(this.perm[b+this.perm[h+this.perm[I]]],y,w,_),g=l(S,p,d),p=this.grad3(this.perm[b+this.perm[v+this.perm[a]]],y,x,P),d=this.grad3(this.perm[b+this.perm[v+this.perm[I]]],y,x,_),u=l(S,p,d);const Z=l(z,g,u);return.936*l(C,O,Z)}noise4(t,s,e,i){let r,o,n,h,a,p,d,g,u,f;r=c(t),o=c(s),n=c(e),h=c(i);const w=t-r,P=s-o,y=e-n,x=i-h,_=w-1,b=P-1,v=y-1,I=x-1,S=r+1&255,z=o+1&255,C=n+1&255,O=h+1&255;r&=255,o&=255,n&=255,h&=255;const Z=m(x),F=m(y),A=m(P),M=m(w);a=this.grad4(this.perm[r+this.perm[o+this.perm[n+this.perm[h]]]],w,P,y,x),p=this.grad4(this.perm[r+this.perm[o+this.perm[n+this.perm[O]]]],w,P,y,I),d=l(Z,a,p),a=this.grad4(this.perm[r+this.perm[o+this.perm[C+this.perm[h]]]],w,P,v,x),p=this.grad4(this.perm[r+this.perm[o+this.perm[C+this.perm[O]]]],w,P,v,I),g=l(Z,a,p),u=l(F,d,g),a=this.grad4(this.perm[r+this.perm[z+this.perm[n+this.perm[h]]]],w,b,y,x),p=this.grad4(this.perm[r+this.perm[z+this.perm[n+this.perm[O]]]],w,b,y,I),d=l(Z,a,p),a=this.grad4(this.perm[r+this.perm[z+this.perm[C+this.perm[h]]]],w,b,v,x),p=this.grad4(this.perm[r+this.perm[z+this.perm[C+this.perm[O]]]],w,b,v,I),g=l(Z,a,p),f=l(F,d,g);const W=l(A,u,f);a=this.grad4(this.perm[S+this.perm[o+this.perm[n+this.perm[h]]]],_,P,y,x),p=this.grad4(this.perm[S+this.perm[o+this.perm[n+this.perm[O]]]],_,P,y,I),d=l(Z,a,p),a=this.grad4(this.perm[S+this.perm[o+this.perm[C+this.perm[h]]]],_,P,v,x),p=this.grad4(this.perm[S+this.perm[o+this.perm[C+this.perm[O]]]],_,P,v,I),g=l(Z,a,p),u=l(F,d,g),a=this.grad4(this.perm[S+this.perm[z+this.perm[n+this.perm[h]]]],_,b,y,x),p=this.grad4(this.perm[S+this.perm[z+this.perm[n+this.perm[O]]]],_,b,y,I),d=l(Z,a,p),a=this.grad4(this.perm[S+this.perm[z+this.perm[C+this.perm[h]]]],_,b,v,x),p=this.grad4(this.perm[S+this.perm[z+this.perm[C+this.perm[O]]]],_,b,v,I),g=l(Z,a,p),f=l(F,d,g);const k=l(A,u,f);return.87*l(M,W,k)}pnoise4(t,s,e,i,r,o,n,h){let a,p,d,g,u,f,w,P,y,x;a=c(t),p=c(s),d=c(e),g=c(i);const _=t-a,b=s-p,v=e-d,I=i-g,S=_-1,z=b-1,C=v-1,O=I-1;r<1&&(r=1),o<1&&(o=1),n<1&&(n=1),h<1&&(h=1);const Z=(a+1)%r&255,F=(p+1)%o&255,A=(d+1)%n&255,M=(g+1)%h&255;a=a%r&255,p=p%o&255,d=d%n&255,g=g%h&255;const W=m(I),k=m(v),E=m(b),V=m(_);u=this.grad4(this.perm[a+this.perm[p+this.perm[d+this.perm[g]]]],_,b,v,I),f=this.grad4(this.perm[a+this.perm[p+this.perm[d+this.perm[M]]]],_,b,v,O),w=l(W,u,f),u=this.grad4(this.perm[a+this.perm[p+this.perm[A+this.perm[g]]]],_,b,C,I),f=this.grad4(this.perm[a+this.perm[p+this.perm[A+this.perm[M]]]],_,b,C,O),P=l(W,u,f),y=l(k,w,P),u=this.grad4(this.perm[a+this.perm[F+this.perm[d+this.perm[g]]]],_,z,v,I),f=this.grad4(this.perm[a+this.perm[F+this.perm[d+this.perm[M]]]],_,z,v,O),w=l(W,u,f),u=this.grad4(this.perm[a+this.perm[F+this.perm[A+this.perm[g]]]],_,z,C,I),f=this.grad4(this.perm[a+this.perm[F+this.perm[A+this.perm[M]]]],_,z,C,O),P=l(W,u,f),x=l(k,w,P);const B=l(E,y,x);u=this.grad4(this.perm[Z+this.perm[p+this.perm[d+this.perm[g]]]],S,b,v,I),f=this.grad4(this.perm[Z+this.perm[p+this.perm[d+this.perm[M]]]],S,b,v,O),w=l(W,u,f),u=this.grad4(this.perm[Z+this.perm[p+this.perm[A+this.perm[g]]]],S,b,C,I),f=this.grad4(this.perm[Z+this.perm[p+this.perm[A+this.perm[M]]]],S,b,C,O),P=l(W,u,f),y=l(k,w,P),u=this.grad4(this.perm[Z+this.perm[F+this.perm[d+this.perm[g]]]],S,z,v,I),f=this.grad4(this.perm[Z+this.perm[F+this.perm[d+this.perm[M]]]],S,z,v,O),w=l(W,u,f),u=this.grad4(this.perm[Z+this.perm[F+this.perm[A+this.perm[g]]]],S,z,C,I),f=this.grad4(this.perm[Z+this.perm[F+this.perm[A+this.perm[M]]]],S,z,C,O),P=l(W,u,f),x=l(k,w,P);const R=l(E,y,x);return.87*l(V,B,R)}}function g(t){if(Math.floor(t)!=t)throw new Error("not an integer");if(t<0)throw new Error("cannot be negative")}var u=e(6762),f=e(6326);class w extends((0,f.JQ)([{name:"x",type:f.w_},{name:"y",type:f.w_},{name:"z",type:f.w_}])){[u.yn.equals](t){return t instanceof w&&this.x===t.x&&this.y===t.y&&this.z===t.z}[u.yn.hash](){let t=0;return t=(0,u.vH)(t,(0,u.s1)(this.x)),t=(0,u.vH)(t,(0,u.s1)(this.y)),t=(0,u.vH)(t,(0,u.s1)(this.z)),t}copyToVector3(t){t.x=this.x,t.y=this.y,t.z=this.z}copyFromVector3(t){this.x=t.x,this.y=t.y,this.z=t.z}toIndex(t){if(Math.floor(t)!=t)throw new Error("must be integer");return this.z*t*t+this.y*t+this.x}static fromVector3(t){const s=new w;return s.copyFromVector3(t),s}}const P=[new o.P(-1,0,0),new o.P(1,0,0),new o.P(0,-1,0),new o.P(0,1,0),new o.P(0,0,-1),new o.P(0,0,1)];new o.P(-1,0,0),new o.P(1,0,0),new o.P(0,-1,0),new o.P(0,1,0);class y{constructor(t){this.vBaseCorner=o.P.Zero(),this.vBaseCorner=t.scale(y.width);const s=y.width;this._voxels=new Uint8Array(s*s*s)}get size(){let t=0;for(const s of this._voxels)1==s&&t++;return t}world_to_cube(t){const s=o.P.Zero();s.copyFrom(t),s.subtract(this.vBaseCorner);const e=w.fromVector3(s),i=new Uint8Array(e.buffer);let r=!0;for(const t of i)t<0&&(r=!1),t>=y.width&&(r=!1);return{pt:e,status:r}}setVoxel(t,s){const e=this.world_to_cube(t);e.status&&(this._voxels[e.pt.toIndex(y.width)]=s?1:0)}getVoxel(t){const s=this.world_to_cube(t);return!!s.status&&1==this._voxels[s.pt.toIndex(y.width)]}*iterate_set_world_voxels(){for(const t of this.scan_world_cube_voxels())this.getVoxel(t)&&(yield t)}*scan_world_cube_voxels(){const t=o.P.Zero();for(const s of function*(t){g(t);const s=o.P.Zero();for(let e=0;e<=t;e++)for(let i=0;i<=t;i++)for(let r=0;r<=t;r++)s.set(e,i,r),yield s}(y.width))t.copyFrom(s),t.add(this.vBaseCorner),yield t}is_boundary_voxel(t){const s=o.P.Zero();let e=0;for(const i of P)s.copyFrom(t),s.addInPlace(i),this.getVoxel(s)&&e++;return 6!=e}extract_boundary_world_voxels(){const t=new Array;for(const s of this.iterate_set_world_voxels())this.is_boundary_voxel(s)&&t.push(s.clone());this._voxels.fill(0);for(const s of t)this.setVoxel(s,!0)}get_translations(){const t=new Float32Array(this._voxels.length*p.y3G.length),s=new p.y3G;let e=0;for(const i of this.iterate_set_world_voxels())s.setTranslation(i),s.copyToArray(t,16*e),e++;return t}}y.width=32,y.widthScale=1/y.width;var x=e(3242);function _(t,s){s.y=t.x,s.z=t.y,s.x=t.z}class b{constructor(t){if(this.position00=o.P.Zero(),this.position10=o.P.Zero(),this.position01=o.P.Zero(),this.position00Scaled=o.P.Zero(),this.position10Scaled=o.P.Zero(),this.position01Scaled=o.P.Zero(),this.normal=o.P.Zero(),this.position00WithOffset=o.P.Zero(),this.position10WithOffset=o.P.Zero(),this.position01WithOffset=o.P.Zero(),this.tangent10=o.P.Zero(),this.tangent01=o.P.Zero(),this.bump=o.P.Zero(),t.scaleNoise<=0)throw new Error("scaleNoise, bad value");if(t.tangentSpaceEpsilon<=0||t.tangentSpaceEpsilon>1)throw new Error("tangentSpaceEpsilon, bad value");this.sampler=t.sampler,this.scaleNoise=t.scaleNoise,this.tangentSpaceEpsilon=t.tangentSpaceEpsilon}bumpToRef(t,s,e){if(Math.abs(s.lengthSquared()-1)>.01)throw new Error("bad normal");this.normal.copyFrom(s),this.position00.copyFrom(t),_(s,this.position10),_(this.position10,this.position01),this.position10.scaleInPlace(this.tangentSpaceEpsilon),this.position10.addInPlace(t),this.position01.scaleInPlace(this.tangentSpaceEpsilon),this.position01.addInPlace(t),this.position00Scaled.copyFrom(this.position00),this.position00Scaled.scaleInPlace(this.scaleNoise),this.position10Scaled.copyFrom(this.position10),this.position10Scaled.scaleInPlace(this.scaleNoise),this.position01Scaled.copyFrom(this.position01),this.position01Scaled.scaleInPlace(this.scaleNoise),this.offsetPositionsByNoise(),e.copyFrom(this.bump)}offsetPositionsByNoise(){this.position00WithOffset.copyFrom(this.normal),this.position00WithOffset.scaleInPlace(this.sampler.sample(this.position00Scaled)),this.position00WithOffset.addInPlace(this.position00),this.position10WithOffset.copyFrom(this.normal),this.position10WithOffset.scaleInPlace(this.sampler.sample(this.position10Scaled)),this.position10WithOffset.addInPlace(this.position10),this.position01WithOffset.copyFrom(this.normal),this.position01WithOffset.scaleInPlace(this.sampler.sample(this.position01Scaled)),this.position01WithOffset.addInPlace(this.position01),this.tangent10.copyFrom(this.position10WithOffset),this.tangent10.subtractInPlace(this.position00WithOffset),this.tangent10.normalize(),this.tangent01.copyFrom(this.position01WithOffset),this.tangent01.subtractInPlace(this.position00WithOffset),this.tangent01.normalize(),o.P.CrossToRef(this.tangent10,this.tangent01,this.bump),this.bump.normalize()}}class v{static generate(t,s,e){const i=new d,r=new b({scaleNoise:.1,tangentSpaceEpsilon:.001,sampler:{sample:t=>i.noise2(t.x,t.y)}}),n=new Uint8ClampedArray(s*s*4),h=new o.P(0,0,1),a=o.P.Zero(),m=o.P.One().scale(.5);for(const e of function*(t){g(t);const s=o.P.Zero();for(let e=0;e<=t;e++)for(let i=0;i<=t;i++)s.set(e,i,0),yield s}(s)){const i=e.add(t);r.bumpToRef(i,h,a),a.scaleInPlace(.5),a.addInPlace(m),a.scaleInPlace(255);const o=4*(e.y*s+e.x);n[o+0]=a.x,n[o+1]=a.y,n[o+2]=a.z,n[o+3]=255}const c=new p.ci9("test",s,e,!0),l=c.getContext(),u=l.getImageData(0,0,s,s);for(let t=0;t<u.data.length;t++)u.data[t]=n[t];return l.putImageData(u,0,0),c.update(!1,!0,!0),c}}class I{constructor(){this.scene=null,this.camera=null,this.canvas=null,this.navigationPlugin=null,this.agentLight=null,this.vCube=o.P.Zero(),this.createScene=async(t,s)=>{await a()(),this.scene=new i.x(t),this.canvas=s,this.camera=new r.Y("my first camera",0,Math.PI/3,10,new o.P(0,0,0),this.scene);const e=this.camera;e.lowerRadiusLimit=.5,e.upperRadiusLimit=.51,e.minZ=.01,e.lowerBetaLimit=Math.PI/4,e.upperBetaLimit=3*Math.PI/4,this.camera.attachControl(s,!0);const h=new n.O("moonLight",new o.P(0,-1,1),this.scene);return h.intensity=.5,h.position.y=10,this.agentLight=new p.cek("agentLight",o.P.Zero(),this.scene),this.agentLight.intensity=.3,await this.perlinBlock(o.P.Zero()),this.runAgents().then((()=>{console.log("runAgents.exit")})),this.scene},this.rocks=null,this.agentMesh=null}async perlinBlock(t){this.vCube.copyFrom(t),this.rocks=p.VO7.CreatePolyhedron("rocks",{size:1,type:2},this.scene);const s=new d,e=new y(t),i=p.VO7.CreateGround("ground",{width:y.width,height:y.width,updatable:!0},this.scene);{const s=t.clone(),r=y.width/2;s.addInPlace(new o.P(r,r,r)),i.position=s;const n=new x.K("ground.material",this.scene);n.backFaceCulling=!1;const h=v.generate(e.vBaseCorner,2048,this.scene);n.bumpTexture=h,n.diffuseColor=p.Wot.Gray(),i.material=n}for(const t of e.scan_world_cube_voxels()){const i=t.clone(),r=i.scale(.1),o=s.noise2(r.x,r.z);Math.abs(o)>.15&&i.y>=y.width/2&&e.setVoxel(t,!0)}console.log("scan_world_cube_voxels.2");const r=this.rocks;function n(){const t=new Float32Array(16*e.size),i=new Float32Array(4*e.size);let n=0;for(const r of e.iterate_set_world_voxels()){const e=r.scale(.2),h=s.noise3(e.y,e.z,e.x),a=s.noise3(e.z,e.x,e.x),m=s.noise3(e.x,e.y,e.z),c=p.y3G.Compose(o.P.One(),p._fP.FromEulerAngles(h,a,m),r);r.clone(),c.copyToArray(t,16*n);const l=(s.noise3(e.x,e.y,e.z)+1)/2;i[4*n+0]=l,i[4*n+1]=l,i[4*n+2]=l,i[4*n+3]=1,n++}console.log("iterate_set_world_voxels"),r.thinInstanceSetBuffer("matrix",t,16),r.thinInstanceSetBuffer("color",i,4),r.material=new x.K("material")}console.log(`cube.size.1: ${e.size}`),n(),this.navigationPlugin=new p.PMy,this.navigationPlugin.createNavMesh([r,i],{cs:.2,ch:.2,walkableSlopeAngle:35,walkableHeight:1,walkableClimb:1,walkableRadius:2,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1}),this.navigationPlugin,this.scene,e.extract_boundary_world_voxels(),n(),console.log(`cube.size.2: ${e.size}`)}async runAgents(){this.agentMesh=p.VO7.CreateSphere("agent",{diameter:.02,updatable:!0},this.scene),this.agentMesh.position=new o.P(0,1,0);const t=new x.K("ground.material",this.scene);this.agentMesh.material=t,t.diffuseColor=p.Wot.Green(),t.alpha=.3;const s=this.navigationPlugin.createCrowd(5,5,this.scene),e=this.vCube.clone(),i=y.width/2;e.addInPlace(new o.P(i,i,i));const r=this.navigationPlugin.getClosestPoint(e),n=(new o.P(0,0,y.width),new p.YOI("transform")),h=s.addAgent(r,{radius:2,height:2,maxAcceleration:4,maxSpeed:1,collisionQueryRange:2,pathOptimizationRange:0,separationWeight:1},n);this.agentMesh.parent=n,this.agentLight.parent=n,this.camera.targetHost=this.agentMesh,s.agentGoto(h,r);const a=s;async function m(t){const s=new p.BH3;return a.onReachTargetObservable.add((e=>{e.agentIndex==t&&(console.log(`agent arrived: ${e.agentIndex}, ${e.destination}`),s.resolve(!0))})),await s.promise}for(;;){await m(h);const t=this.navigationPlugin.getRandomPointAround(n.position,10*y.width),e=this.navigationPlugin.moveAlong(n.position,t);console.log(`moveAlong: ${e.toString()}`),s.agentGoto(h,e),console.log(`agent goto: ${r.toString()}`)}}}const S=new I},400:()=>{},2603:()=>{}}]);
//# sourceMappingURL=970.babylonBundle.js.map